# !/usr/bin/env python

from flask import Flask
from flask_github import GitHub
from flask_mongoengine import MongoEngine

from api_v1 import api_v1
from web import web
from classes import *

app = Flask(__name__)
app.config.from_pyfile('app.cfg')
app.secret_key = app.config['SECRET_KEY']

@web.context_processor
def inject_context():
    return {
        'sources_org': app.config['GITHUB_SOURCES_ORG'],
        'status_descriptions': StatusDescriptions,
        'branch_names': BranchNames,
        'kernel_versions': KernelVersions
    }

db = MongoEngine(app)
github = GitHub(app)

app.register_blueprint(api_v1)
app.register_blueprint(web)
