{% extends "base.html" %}
{% block title %}{{ kernel.vendor }}/{{ kernel.device }} - LineageOS CVE Tracker{% endblock %}
{% block earlyscripts %}
    <script type="text/javascript">
        var pageData = {
            repo: "{{ kernel.repo }}",
            branchName: "{{ branch_name }}"
        };
    </script>
    <script src="/static/js/Progress.js" type="text/javascript"></script>
    <link href="/static/css/kernel.css" rel="stylesheet" type="text/css">
{% endblock %}
{% block content %}
    <div id="patchsets-format-dialog" class="dialog">
        <div class="title">Patchsets format</div>
        <div class="content">
            <div class="input-group">
                <pre>
3.4 3.10 3.18
http://link.com/to/commit/file1.patch
http://link.com/to/commit/file2.patch

4.4
http://link.com/to/commit/file3.patch
http://link.com/to/commit/file4.patch
                </pre>
                <p class="note">
                    Each group represents a patchset.<br>
                    Each patchset applies to a list of major kernel versions.<br>
                    There can be multiple patchsets for the same kernel version.<br>
                    Each link in a patchset is a link to a patchfile.<br>
                </p>
            </div>
        </div>
        <div class="actions">
            <button class="cancel">GOT IT</button>
        </div>
    </div>

    <div id="cve-info-dialog" class="dialog">
        <div class="title">
            <div class="name">CVE-20YY-XXX</div>
            <div class="score">-1</div>
        </div>
        <div class="content">
            <div class="input-group">
                <label>Notes</label>
                <textarea class="notes" placeholder="No notes specified." disabled="true"></textarea>
            </div>
            <div class="input-group">
                <label>Tags</label>
                <input class="tags" placeholder="No tags specified." disabled="true" type="text">
            </div>
            <div class="input-group">
                <label>
                    Patchsets
                    <i class="patchsets-format-dialog-triggers mdi mdi-information"></i>
                </label>
                <textarea class="patchsets" disabled="true"></textarea>
            </div>
        </div>
        <div class="actions">
            <button class="cancel">CANCEL</button>
        </div>
    </div>

    <div id="add-cve-dialog" class="dialog">
        <div class="title">Add CVE</div>
        <div class="content">
            <div class="input-group">
                <label>Name</label>
                <input class="name" placeholder="CVE-20YY-XXXX" type="text">
            </div>
            <div class="input-group">
                <label>Notes</label>
                <textarea class="notes" placeholder="..."></textarea>
            </div>
            <div class="input-group">
                <label>Score</label>
                <input class="score" default="0" min="0" max="10" type="number">
                <span class="note">Must be a value between 0 and 10, inclusive.</span>
            </div>
            <div class="input-group">
                <label>Tags</label>
                <input class="tags" placeholder="..." type="text">
                <span class="note">Must be a space separated list of words.</span>
            </div>
            <div class="input-group">
                <label>
                    Patchsets
                    <i class="patchsets-format-dialog-triggers mdi mdi-information"></i>
                </label>
                <textarea class="patchsets" placeholder="..."></textarea>
            </div>
        </div>
        <div class="actions">
            <button class="cancel">CANCEL</button>
            <button class="add">ADD</button>
        </div>
    </div>

    <div class="card container">
        <div class="header">
            <span class="title">
                {{ kernel.vendor }}/{{ kernel.device }}
                <a href="https://github.com/{{ org }}/{{ kernel.repo_name }}"
                        target="_blank" title="View on GitHub">
                    <i class="mdi mdi-github-circle"></i>
                </a>
            </span>
            <div id="branches" class="selectable">
                {% for branch in kernel.branches %}
                    <a href="{{ branch.name }}"
                    {% if branch.name == branch_name %}
                        class="active"
                    {% endif %}
                    >
                        {{ branch.name }}
                    </a>
                {% endfor %}
            </div>
            <div id="percentage" class="progress-bar"
                    data-value="{{ kernel.default_branch_percentage }}">
                <div class="progress-bar-inner"></div>
                <div class="progress-value"></div>
            </div>
        </div>
        <div id="cves-container">
            {% for cve in cves %}
                <div class="cve">
                    <span class="severity" data-score="{{ cve.score }}"></span>
                    <span class="name" data-name="{{ cve.name }}">{{ cve.name }}</span>
                    <span class="status status-menu"
                            data-name="{{ cve.name }}" data-status="{{ statuses[cve.name] }}">
                        {{ status_descriptions[statuses[cve.name]] }}
                    </span>
                </div>
            {% endfor %}
        </div>
        <div class="actions">
            <button id="add-cve-dialog-trigger">ADD CVE</button>
        </div>
    </div>
{% endblock %}
{% block latescripts %}
    <script src="/static/js/kernel.js"></script>
{% endblock %}