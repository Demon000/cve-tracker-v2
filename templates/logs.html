{% extends "base.html" %}
{% block earlyscripts %}
    <link href="/static/css/logs.css" rel="stylesheet" type="text/css">
{% endblock %}
{% block content %}
    <div class="card container">
        <div class="header">
            <span class="title">Logs for {{ title }}</span>
            <span class="text">Page {{ page }} out of {{ pages }}</span>
        </div>
        {% if logs %}
        <div id="logs-container">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>User</th>
                        <th>References</th>
                        <th>From</th>
                        <th>To</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr>
                        <td>{{ log.date.strftime('%b %d, %Y %H:%m') }}</td>
                        <td>{{ log.author }}</td>
                        <td>
                            {% for key in log.references %}
                                {{ key }}: {{ value_parse(log.references[key]) }}<br>
                            {% endfor %}
                        </td>
                        <td class="json">{{ to_json(log.from_data) }}</td>
                        <td class="json">{{ to_json(log.to_data) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div id="page-nav-container">
                {% if page != 1 %}
                <a href="?page={{ page - 1 }}" id="prev-page" class="fab mdi mdi-chevron-left"></a>
                {% endif %}
                {% if page != pages %}
                <a href="?page={{ page + 1 }}" id="next-page" class="fab mdi mdi-chevron-right"></a>
                {% endif %}
            </div>
        </div>
        {% else %}
        <div class="text">
            <p>There are no logs on this page.</p>
        </div>
        {% endif %}
    </div>
{% endblock %}