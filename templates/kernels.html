{% extends "base.html" %}
{% block title %}Kernels - LineageOS CVE Tracker{% endblock %}

{% block nav_deprecated_kernels %}
    {% if deprecated %}active{% endif %}
{% endblock %}
{% block nav_kernels %}
    {% if not deprecated %}active{% endif %}
{% endblock %}

{% block earlyscripts %}
    <link href="/static/css/kernels.css" rel="stylesheet" type="text/css" >
{% endblock %}
{% block content %}
    {% if not deprecated %}
    <div id="add-kernel-dialog" class="dialog">
        <div class="title">Add kernel</div>
        <div class="content">
            <div class="input-group">
                <label>Repository</label>
                <input class="repo" placeholder="android_kernel_vendor_device" type="text">
            </div>
            <div class="input-group">
                <label>Branches</label>
                <input class="branches" placeholder="cm-14.1=3.10 lineage-15.0=3.18" type="text">
                <span class="note">Must be a space-separated list of name=version pairs.</span>
            </div>
            <div class="input-group">
                <label>Default branch</label>
                <input class="default-branch" placeholder="cm-14.1" type="text">
            </div>
        </div>
        <div class="actions">
            <button class="cancel">CANCEL</button>
            <button class="add">ADD</button>
        </div>
    </div>
    {% endif %}

    <div class="card container">
        <div class="header">
            <span class="title">
            {% if deprecated %}
                Deprecated kernels
            {% else %}
                Kernels
            {% endif %}
            </span>
        </div>
        <div id="vendors-container">
            {% for vendor, kernels in vendors.items() %}
            <div class="vendor">
                <span class="title">{{ vendor }}</span>
                {% for kernel in kernels %}
                    <div class="kernel">
                        <a class="repo" href="/kernels/{{ kernel.repo }}/{{ kernel.default_branch }}">
                            {{ kernel.device }}
                        </a>
                        <span>({{ kernel.default_branch_percentage }} %)</span>
                    </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        {% if not deprecated %}
        <div class="actions">
            <button id="add-kernel-dialog-trigger">ADD KERNEL</button>
        </div>
        {% endif %}
    </div>
{% endblock %}
{% block latescripts %}
    {% if not deprecated %}
    <script src="/static/js/kernels.js"></script>
    {% endif %}
{% endblock %}