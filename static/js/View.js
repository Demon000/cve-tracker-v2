(function() {
    function View(options) {
        options = options || {};

        this.template = options.template;

        this.attached = false;

        this.detach = function() {
            if (this.attached) {
                this.parent.removeChild(this.element);
                this.attached = false;
            }
            return this;
        };

        this.attach = function(parent) {
            this.detach();
            if (this.element) {
                parent.appendChild(this.element);
                this.attached = true;
            }
            this.parent = parent;
            return this;
        };

        this.setElement = function(element) {
            if (this.parent) {
                if (this.element) {
                    this.parent.replaceChild(element, this.element);
                } else {
                    this.parent.appendChild(element);
                }                
            }
            this.element = element;
            return this;
        };

        this.render = function(data) {
            var element = stringToElement(this.template(data));
            this.setElement(element);
            this.data = data;
            return this;
        };

        if (options.data) {
            this.render(options.data);
        }
        if (options.parent) {
            this.attach(options.parent);
        }
    }
    window.View = View;
})();