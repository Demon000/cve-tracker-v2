(function() {
    function ExtendedDialog(o) {
        o.resize = '.resize';
        o.drag = '.title';

        var resizeHandle = createElement('i', {
            class: 'resize',
            parent: o.element
        });

        var dialog = new Dialog(o);

        dialog.clearInputs = function() {
            var inputs = dialog.element.querySelectorAll('input');
            for (var i = 0; i < inputs.length; i++) {
                inputs[i].value = '';
            }
        };

        var title = dialog.element.querySelector('.title');
        var actions = dialog.element.querySelector('.actions');
        var content = dialog.element.querySelector('.content');
        dialog.emitter.on('resized', function() {
            dialog.measuring(true);
            var contentHeight =
                    dialog.element.offsetHeight - title.offsetHeight - actions.offsetHeight;
            resizeElement(content, null, contentHeight);
            dialog.measuring(false);
        });

        dialog.emitter.on('opened', function() {
            var input = dialog.element.querySelector('input');
            if (!input) {
                return;
            }

            input.focus();
        });

        return dialog;
    }
    window.ExtendedDialog = ExtendedDialog;
})();
